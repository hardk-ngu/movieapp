import{_ as g,F as n,G as c,M as l,N as S,J as v,K as L,a6 as D,a7 as R,R as r,a3 as H,a2 as j,b as y,Y as p,Z as k,ac as z,U as G,T as M,f as I,a as w,ax as T,ay as B,az as P,o as U,ae as A,aA as q,aB as E,ao as J,ah as K,aC as Y}from"./index.e00a4050.js";const Z={props:{curLocation:{type:Object,default:()=>{}},hotCities:{type:Array,default:()=>[]}},emits:["chooseCity"],setup(i,e){function a(t){e.emit("chooseCity",t)}return{chooseCity:a}}},F=i=>(D("data-v-9866cd5e"),i=i(),R(),i),Q={class:"locate-and-hot"},X=F(()=>l("p",null,"GPS\u5B9A\u4F4D\u4F60\u6240\u5728\u7684\u57CE\u5E02",-1)),$=["data-cityid","data-cityname"],tt=F(()=>l("p",null,"\u70ED\u95E8\u57CE\u5E02",-1)),et={class:"hot-citys"},at=["data-cityid","data-cityname"];function ot(i,e,a,t,u,_){return n(),c("div",Q,[X,l("span",{class:"location","data-cityid":a.curLocation.cityId,"data-cityname":a.curLocation.name,onClick:e[0]||(e[0]=(...o)=>t.chooseCity&&t.chooseCity(...o))},S(a.curLocation.name||"\u5B9A\u4F4D\u5931\u8D25"),9,$),tt,l("ul",et,[(n(!0),c(v,null,L(a.hotCities,o=>(n(),c("li",{class:"hot-item",key:o.cityId,"data-cityid":o.cityId,"data-cityname":o.name,onClick:e[1]||(e[1]=(...d)=>t.chooseCity&&t.chooseCity(...d))},S(o.name),9,at))),128))])])}var nt=g(Z,[["render",ot],["__scopeId","data-v-9866cd5e"]]);const it={props:{firstWords:{type:Array,default:()=>[]},letterTable:{type:Object,default:()=>{}},stickyHeaderHeight:Number},emits:["chooseCity"],setup(i,e){function a(t){e.emit("chooseCity",t)}return{chooseCity:a}}};function st(i,e,a,t,u,_){const o=r("van-index-anchor"),d=r("van-cell"),C=r("van-index-bar");return n(),H(C,{class:"index-bar","index-list":a.firstWords,"highlight-color":"#FF4040",sticky:!0,"sticky-offset-top":a.stickyHeaderHeight},{default:j(()=>[(n(!0),c(v,null,L(a.letterTable,(m,h)=>(n(),c(v,{key:h},[y(o,{index:h},null,8,["index"]),l("div",{onClickCapture:e[0]||(e[0]=(...s)=>t.chooseCity&&t.chooseCity(...s))},[(n(!0),c(v,null,L(m,s=>(n(),H(d,{title:s.name,key:s.cityId,"data-cityid":s.cityId,"data-cityname":s.name},null,8,["title","data-cityid","data-cityname"]))),128))],32)],64))),128))]),_:1},8,["index-list","sticky-offset-top"])}var ct=g(it,[["render",st],["__scopeId","data-v-1b2bd7c4"]]);const rt={props:{resultList:{type:Array,default:()=>[]}},emits:["chooseCity"],setup(i,e){function a(t){e.emit("chooseCity",t)}return{chooseCity:a}}},lt={class:"search-result"},dt=["data-cityid","data-cityname"],yt={class:"no-result"};function ut(i,e,a,t,u,_){return n(),c("div",lt,[p(l("ul",{class:"result-list",onClick:e[0]||(e[0]=(...o)=>t.chooseCity&&t.chooseCity(...o))},[(n(!0),c(v,null,L(a.resultList,o=>(n(),c("li",{key:o.cityId,class:"result-item","data-cityid":o.cityId,"data-cityname":o.name},S(o.name),9,dt))),128))],512),[[k,a.resultList.length>0]]),p(l("div",yt," \u6CA1\u6709\u627E\u5230\u5339\u914D\u7684\u7ED3\u679C ",512),[[k,!a.resultList]])])}var _t=g(rt,[["render",ut],["__scopeId","data-v-6b1d1cea"]]);const ht={components:{NavBar:z,LocationAndHot:nt,CityList:ct,SearchResult:_t},setup(i){const e=G(),a=M(),t=I(""),u=I(null),_=I(0),o=w(()=>{if(t.value)return T.data.filter(f=>{const b=f.pinyin.charAt(0);return f.name.includes(t.value)||b.includes(t.value)})}),d=w(()=>Object.keys(B.data).length>0);P();async function C(f){let b=null;for(let V of f.path)if(V.dataset.cityid){b=V.dataset;break}const{cityid:x,cityname:N}=b,{fromPath:W,ticketFlag:O}=a.query;if(x!=A.city.id)switch(J.updateCityInfo({cityId:x,name:N}),W){case"/":Y();break;case"/cinemas":K({cityId:x,ticketFlag:O});break}e.back()}function m(){}function h(){t.value=""}function s(){e.back()}return U(()=>{_.value=u.value.offsetHeight}),{store:A,city:T,firstWords:q,letterTable:B,hotCity:E,inputValue:t,stickyHeader:u,stickyHeaderHeight:_,isLetterTableDone:d,resultList:o,goBack:s,chooseCity:C,onSearch:m,onCancel:h}}},ft={class:"city-view"},Ct={class:"sticky-header",ref:"stickyHeader"},mt={class:"normal-content"};function vt(i,e,a,t,u,_){const o=r("nav-bar"),d=r("van-search"),C=r("location-and-hot"),m=r("city-list"),h=r("my-loading"),s=r("search-result");return n(),c("div",ft,[l("div",Ct,[y(o,{title:`\u5F53\u524D\u57CE\u5E02-${t.store.city.name}`,leftIconName:"close",leftIconSize:18,isShowLeftText:!1,onOnClickLeft:t.goBack},null,8,["title","onOnClickLeft"]),y(d,{modelValue:t.inputValue,"onUpdate:modelValue":e[0]||(e[0]=f=>t.inputValue=f),"show-action":!!t.inputValue,placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0\u6216\u62FC\u97F3",onSearch:t.onSearch,onCancel:t.onCancel},null,8,["modelValue","show-action","onSearch","onCancel"])],512),p(l("div",mt,[y(C,{curLocation:t.store.city,hotCities:t.hotCity.data,onChooseCity:t.chooseCity},null,8,["curLocation","hotCities","onChooseCity"]),y(m,{firstWords:t.firstWords.data,letterTable:t.letterTable.data,"sticky-header-height":t.stickyHeaderHeight,onChooseCity:t.chooseCity},null,8,["firstWords","letterTable","sticky-header-height","onChooseCity"]),p(y(h,{position:"absolute"},null,512),[[k,!t.isLetterTableDone]])],512),[[k,!t.inputValue]]),p(y(s,{resultList:t.resultList,onChooseCity:t.chooseCity},null,8,["resultList","onChooseCity"]),[[k,t.inputValue]])])}var kt=g(ht,[["render",vt],["__scopeId","data-v-041c8076"]]);export{kt as default};
